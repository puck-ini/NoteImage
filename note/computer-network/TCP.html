<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TCP | zchzh的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="怎么还有😇">
    
    <link rel="preload" href="/blog/assets/css/0.styles.dcea0daa.css" as="style"><link rel="preload" href="/blog/assets/js/app.3380ae4e.js" as="script"><link rel="preload" href="/blog/assets/js/2.0274c0be.js" as="script"><link rel="preload" href="/blog/assets/js/18.f060a0c0.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.39f93c74.js"><link rel="prefetch" href="/blog/assets/js/11.5e5b0273.js"><link rel="prefetch" href="/blog/assets/js/12.48b1baa1.js"><link rel="prefetch" href="/blog/assets/js/13.34e67170.js"><link rel="prefetch" href="/blog/assets/js/14.c465dcd1.js"><link rel="prefetch" href="/blog/assets/js/15.4cc84165.js"><link rel="prefetch" href="/blog/assets/js/16.a8c1c0ff.js"><link rel="prefetch" href="/blog/assets/js/17.c794ab21.js"><link rel="prefetch" href="/blog/assets/js/19.e180cbda.js"><link rel="prefetch" href="/blog/assets/js/20.b7061d47.js"><link rel="prefetch" href="/blog/assets/js/21.207c3fdc.js"><link rel="prefetch" href="/blog/assets/js/22.dc828c23.js"><link rel="prefetch" href="/blog/assets/js/23.9490e432.js"><link rel="prefetch" href="/blog/assets/js/24.b3542c1e.js"><link rel="prefetch" href="/blog/assets/js/25.b97f6149.js"><link rel="prefetch" href="/blog/assets/js/26.7a471117.js"><link rel="prefetch" href="/blog/assets/js/27.d94037a6.js"><link rel="prefetch" href="/blog/assets/js/28.c1eb6c3e.js"><link rel="prefetch" href="/blog/assets/js/29.619982b6.js"><link rel="prefetch" href="/blog/assets/js/3.ebbba8bc.js"><link rel="prefetch" href="/blog/assets/js/30.bfc87207.js"><link rel="prefetch" href="/blog/assets/js/31.58cc033e.js"><link rel="prefetch" href="/blog/assets/js/32.02b2fdd1.js"><link rel="prefetch" href="/blog/assets/js/33.f0e8ce96.js"><link rel="prefetch" href="/blog/assets/js/34.8a554fac.js"><link rel="prefetch" href="/blog/assets/js/35.e4ee23e1.js"><link rel="prefetch" href="/blog/assets/js/36.d8bde7d7.js"><link rel="prefetch" href="/blog/assets/js/37.6ea280fa.js"><link rel="prefetch" href="/blog/assets/js/38.46aa9f69.js"><link rel="prefetch" href="/blog/assets/js/39.f36ec496.js"><link rel="prefetch" href="/blog/assets/js/4.ddf64f16.js"><link rel="prefetch" href="/blog/assets/js/40.6caf10de.js"><link rel="prefetch" href="/blog/assets/js/41.cda00637.js"><link rel="prefetch" href="/blog/assets/js/42.72b3c2e9.js"><link rel="prefetch" href="/blog/assets/js/43.778d31c0.js"><link rel="prefetch" href="/blog/assets/js/44.7432414e.js"><link rel="prefetch" href="/blog/assets/js/45.862990e2.js"><link rel="prefetch" href="/blog/assets/js/46.8a97cd17.js"><link rel="prefetch" href="/blog/assets/js/47.330a8198.js"><link rel="prefetch" href="/blog/assets/js/48.8e922edb.js"><link rel="prefetch" href="/blog/assets/js/49.b040d9bd.js"><link rel="prefetch" href="/blog/assets/js/5.5cb292f8.js"><link rel="prefetch" href="/blog/assets/js/50.0416f48a.js"><link rel="prefetch" href="/blog/assets/js/51.fa2a6243.js"><link rel="prefetch" href="/blog/assets/js/52.41208edf.js"><link rel="prefetch" href="/blog/assets/js/53.f39ac999.js"><link rel="prefetch" href="/blog/assets/js/54.cc11c37a.js"><link rel="prefetch" href="/blog/assets/js/6.a012196c.js"><link rel="prefetch" href="/blog/assets/js/7.d843207a.js"><link rel="prefetch" href="/blog/assets/js/8.d3387bae.js"><link rel="prefetch" href="/blog/assets/js/9.89ebce13.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.dcea0daa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">zchzh的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/note/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/blog/share/" class="nav-link">
  分享
</a></div><div class="nav-item"><a href="/blog/other/" class="nav-link">
  其他
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/puck-ini" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://puck-ini.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/blog/note/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/blog/interview/" class="nav-link">
  面试
</a></div><div class="nav-item"><a href="/blog/share/" class="nav-link">
  分享
</a></div><div class="nav-item"><a href="/blog/other/" class="nav-link">
  其他
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GitHub" class="dropdown-title"><span class="title">GitHub</span> <span class="arrow down"></span></button> <button type="button" aria-label="GitHub" class="mobile-dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/puck-ini" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://puck-ini.github.io/blog/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>java笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/note/java/java.html" class="sidebar-link">java</a></li><li><a href="/blog/note/java/java Future.html" class="sidebar-link">Future 接口</a></li><li><a href="/blog/note/java/锁类型.html" class="sidebar-link">锁类型</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>springboot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>redis笔记</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>zookeeper</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="tcp"><a href="#tcp" class="header-anchor">#</a> TCP</h1> <p>TCP，Transmission Control Protocol，传输控制协议。</p> <p>TCP 是运输层的重要协议，也是 TCP/IP 体系中一种重要协议（UDP，也是该体系中重要的协议之一）。</p> <p>运输层向应用层提供通信服务。</p> <p>两个主机之间的通信严格说应该是两个主机中的应用进程之间的通信。</p> <p>运输层向高层用户屏蔽了下面网络核心的细节（如网络拓扑、所采用的路由协议等），它使应用进程之间像是有一条端到端的逻辑通信信道。</p> <p>TCP 是一种面向连接的协议，在传输数据前需要建立连接，数据传输后需要释放连接，不提供广播或多播服务。</p> <p>TCP 提供可靠、面向连接的运输服务，因此会额外增加许多的开销，如确认、流量控制、计时器以及连接管理等。这不仅使协议数据单元的首部增大很多，还会占用许多的处理及资源。</p> <p>使用 TCP 实现的应用层协议：SMTP（电子邮件）、TELNET（远程终端接入）、HTTP（万维网）、FTP（文件传送）</p> <p>协议端口号，简称端口，端口的出现是为了让不同操作系统的计算机的应用进程能够相互通信，同时解决不同操作系统之间的进程标识符不一致的问题。通过端口，我们只需要把传送的数据教导目的主机的某一个合适的目的端口，剩下的工作就可以交由 TCP 完成，即将数据交付给目的进程。这种协议栈层间的抽象的协议端口是软件端口，和路由器或交换机上的硬件端口是完全不同的概念。</p> <p>TCP 有源端口和目的端口两个重要字段。</p> <p>TCP 的主要特点：</p> <ul><li>TCP 是面像连接的运输层协议。在传输数据前需要建立连接，数据传输后需要释放连接</li> <li>每一条 TCP 连接只有两个端点，每一条 TCP 连接只能是点对点的（一对一）</li> <li>TCP 提供可靠交付的服务。通过 TCP 连接传送的数据，无差错、不丢失、不重复、并且按序到达。</li> <li>TCP 提供全双工通信。即通信的双方既能发送数据也能接收数据。TCP 连接的两端都设有发送缓存和接收缓存，用来临时存放双向通信的数据。在发送时，应用程序把数据传送到 TCP 的缓存后就可以做自己的事情了，而 TCP 在何使的时候把数据发送出去。在接收时，TCP 把收到的数据放入缓存，上层的应用进程在合适的时候读取缓存中的数据。</li> <li>面向字节流。TCP 中的流（stream）指的是流入到进程或从进程流出的字节序列。</li></ul> <p>TCP 的连接</p> <p>TCP 把连接作为最基本的抽象。TCP 的许多特性都与 TCP 是面向连接的这个基本特性有关。</p> <p>每一条 TCP 连接都有两个端点，这个端点叫做套接字（socket）或插口。根据 RFC 793 的定义：端口号拼接到 IP 地址即构成套接字。例如 127.0.0.1:8080。</p> <p>套接字 socket = (IP 地址:端口号)</p> <p>TCP 可靠传输的工作原理</p> <p>TCP 发送的报文段是交给 IP 层传输的。但是 IP 层只能提供尽最大努力服务，即 TCP 下面的网络所提供的是不可靠的传输，因此，TCP 必须采取适当的措施才能使得两个运输层之间的通信变得可靠。</p> <p>停止等待协议</p> <p>停止等待的意思是每发送完一个分组就停止发送，等待接收方的确认信息，在收到确认信息后再发送下一个分组。当出现差错时，发送端没有收到确认消息，过一定时间后会重新发送出差错的分组。重传时间需要经过精确的计算，太长会导致通讯效率低，太短会造成不必要的重传浪费网络资源。</p> <p>停止等待协议简单，但是信道利用率太低，因为停止等待协议每次发送一个分组就得等到确认信息之后才能发送下一个分组，在确认信息到来前还可能发生分组丢失或者确认信息丢失问题。</p> <p>因此，为了提高效率，发送方可以不适用低效率的停止等待协议，而是采用流水线传输，流水线传输需要使用到连续 ARQ 协议和滑动窗口协议。</p> <p>连续 ARQ 协议</p> <p>发送方维持一个发送窗口，发送窗口可以设置多个分组，这些分组可以连续发送出去，而不需要等待接收方确认，发送方每收到一个确认就将窗口向前移动一格分组的位置。</p> <p>接收方一般采用累积确认的方式，即接收方不必对收到的分组逐个发送确认，而是可以在收到几个分组之后对按序导大的最后一个分组发送确认，这样就表示到这个分组的所有分组都已正确收到了。</p> <p>累积确认容易实现，即使确认丢失了也不必重传。缺点时不能向发送方反映接收方已经正确收到的所有分组信息。</p> <p>TCP 报文段的首部格式</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.3380ae4e.js" defer></script><script src="/blog/assets/js/2.0274c0be.js" defer></script><script src="/blog/assets/js/18.f060a0c0.js" defer></script>
  </body>
</html>
